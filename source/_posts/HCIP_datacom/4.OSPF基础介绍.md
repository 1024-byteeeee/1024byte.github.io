---
title: 3、OSPF基础介绍
date: 2022-11-05 00:45:21
tags: HCIP-datacom
categories: HCIP-datacom
typora-root-url: ..
---

# 前言

**·**  路由器根据路由表转发数据包，路由表项可通过手动配置和动态路由协议生成。

**·**  静态路由比动态路由使用更少的贷款，并且不占用CPU资源来计算和分析路由更新。当网络结构比较简单时，只需配置静态路由就可以使网络正常工作。但是当网络发生故障或者拓扑发生变化后，静态路由不会自动更新，必须手动重新配置。

**·**  相比较于静态路由，动态路由协议具有更强的可扩展性，具备更强的应变能力。

**·**  OSPF（Open Shortest Path First，开放式最短路径优先）具有扩展性强，收敛速度快等特点，作为优秀的内部网关协议被广泛使用。

<br>

# Ⅰ - 动态路由协议简介

## 1.动态路由协议的分类

按工作区域分类：

```
IGP（Interior Gateway Protocols，内部网关协议）：
· RIP
· OSPF
· IS-IS

EGP（Exterior Gateway Protocols，外部网关协议）{
· BGP
```

按工作机制及算法分类：

```
（Distance Vector Routing Protocols，距离矢量路由协议）
· RIP

（Link-State Routing Protocols，链路状态路由协议）
· OSPF
· IS-IS
```

**·**  BGP使用一种基于距离矢量算法修改后的算法，该算法被称为路径矢量算法。因此在某些场合下，BGP也被成为路径矢量路由协议。

**·**  IGP（内部网关协议）在同一个自治系统内交换路由信息，IGP的主要目的是发现和计算自治域内的路由信息。

**·**  EGP（外部网关协议）主要用于AS（自治系统）之间的互联。

 <br>

## 2.距离矢量路由协议

**·**  运行距离矢量路由协议的路由器周期性地泛洪自己的路由表。通过路由地交互，每台路由器都从相邻地路由器学习到路由，并且加载进自己的路由表中，然后再通告给其他相邻路由器。

**·**  对于网络中地所有路由器而言，路由器并不清楚网络的拓扑，只是简单地知道要去往某个目的地网段方向在哪里，开销有多大。

## 3.链路状态路由协议 - LSA泛洪

**·**  链路状态路由协议通告的是链路状态而不是路由信息。

**·**  运行链路状态协议的路由器之间首先会建立邻居关系，然后彼此之间开始交换LSA（Link State Advertisement，链路状态通告）。

**·**  链路状态通告，可以简单的理解为每台路由器都产生一个描述自己的直连接口状态（包括接口的开销、与邻居路由器之间的关系等）的通告。

<br>

## 4.链路状态路由协议 - LSDB维护

每台路由器都会产生LSA，路由器将接收到的LSA放入自己的LSDB（Link State DataBase，链路状态数据库）。路由器通过对LSDB中所储存的LSA进行解析，进而了解全网拓扑。

<br>

## 5.链路状态路由协议 - SPF计算

每台路由器基于LSDB，使用SPF（Shortest Path First，最短路径优先）算法进行计算。每台路由器都计算出一棵以自己为根的、无环的、拥有最短路径的“树”。有了这颗“树”，路由器就已经知道了到达所有网段的优选路径。SPF是OSPF路由协议的一个核心算法，用来再一个复杂的网络中做出路由优选的决策。

<br>

## 6.链路状态路由协议 - 路由表生成

路由器将计算出来的优选路径，加载进自己的路由表。

<br>

## 7.链路状态路由协议总结

![总结](/../images/HCIP-datacom-3%E3%80%81OSPF%E5%9F%BA%E7%A1%80/%E6%80%BB%E7%BB%93.PNG)

第一步：建立相邻路由器之间的邻居关系。

第二步：邻居之间交互链路状态信息和同步LSDB

第三步：是进行优选路径计算

第四步：根据最短路径树生成路由表项加载到路由表

